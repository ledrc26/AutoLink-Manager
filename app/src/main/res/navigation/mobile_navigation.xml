<?xml version="1.0" encoding="utf-8"?>
<navigation xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/mobile_navigation"
    app:startDestination="@+id/nav_home">

    <fragment
        android:id="@+id/nav_home"
        android:name="com.example.autolinkmanager.ui.home.HomeFragment"
        android:label="@string/menu_home"
        tools:layout="@layout/fragment_home" >
        <action
            android:id="@+id/action_nav_home_to_nav_add_car"
            app:destination="@id/nav_add_car" />
        <action
            android:id="@+id/action_nav_home_to_nav_car_list"
            app:destination="@id/nav_car_list" />
    </fragment>

    <fragment
        android:id="@+id/nav_gallery"
        android:name="com.example.autolinkmanager.ui.gallery.GalleryFragment"
        android:label="@string/menu_gallery"
        tools:layout="@layout/fragment_gallery" />

    <fragment
        android:id="@+id/nav_slideshow"
        android:name="com.example.autolinkmanager.ui.slideshow.SlideshowFragment"
        android:label="@string/menu_slideshow"
        tools:layout="@layout/fragment_slideshow" />

    <fragment
        android:id="@+id/nav_create_agency"
        android:name="com.example.autolinkmanager.ui.admin.CreateAgencyFragment"
        android:label="Crear agencia"
        tools:layout="@layout/fragment_create_agency" />

    <fragment
        android:id="@+id/nav_agencies_map"
        android:name="com.example.autolinkmanager.ui.admin.AgenciesMapFragment"
        android:label="Agencias en el mapa"
        tools:layout="@layout/fragment_agencies_map" />

    <fragment
        android:id="@+id/nav_assign_agency"
        android:name="com.example.autolinkmanager.ui.admin.AssignAgencyFragment"
        android:label="Asignar agencia"
        tools:layout="@layout/fragment_assign_agency" />

    <!-- Fragmentos del Flujo de Agregar Auto (CORREGIDOS) -->
    <fragment
        android:id="@+id/nav_add_car"
        android:name="com.example.autolinkmanager.ui.addauto.AddAutoFragment"
        android:label="Agregar auto"
        tools:layout="@layout/fragment_add_auto">

        <!-- ***** CAMBIO 1: AÑADIDA LA ACCIÓN PARA NAVEGAR ***** -->
        <!-- Esta es la flecha que va desde "Agregar auto" hacia "Seleccionar Servicio" -->
        <action
            android:id="@+id/action_nav_add_car_to_nav_select_serv"
            app:destination="@id/nav_select_serv" />
    </fragment>

    <fragment
        android:id="@+id/nav_select_serv"
        android:name="com.example.autolinkmanager.ui.SelecServices.SectServices"
        android:label="Seleccionar Servicio"
        tools:layout="@layout/fragment_sect_services">

        <!-- ***** CAMBIO 2: AÑADIDO EL ARGUMENTO QUE RECIBE ***** -->
        <!-- Declara que este fragmento espera recibir un objeto "auto_data" de tipo Auto -->
        <argument
            android:name="auto_data"
            app:argType="com.example.autolinkmanager.Auto" />

        <!-- ***** CAMBIO 3: AÑADIDA LA ACCIÓN PARA NAVEGAR ***** -->
        <!-- Esta es la flecha que va desde "Seleccionar Servicio" hacia "Mantenimiento" -->
        <action
            android:id="@+id/action_nav_select_serv_to_nav_mantenimiento"
            app:destination="@id/nav_mantenimiento" />
        <action
            android:id="@+id/action_nav_select_serv_to_nav_hojalateria"
            app:destination="@id/nav_hojalateria" />
    </fragment>

    <fragment
        android:id="@+id/nav_mantenimiento"
        android:name="com.example.autolinkmanager.ui.mantenimiento.MantenimientoFragment"
        android:label="Mantenimiento"
        tools:layout="@layout/fragment_mantenimiento">

        <!-- ***** CAMBIO 4: AÑADIDO EL ARGUMENTO QUE RECIBE ***** -->
        <!-- Declara que este fragmento TAMBIÉN espera recibir el objeto "auto_data" -->
        <argument
            android:name="auto_data"
            app:argType="com.example.autolinkmanager.Auto" />
    </fragment>

    <fragment
        android:id="@+id/nav_hojalateria"
        android:name="com.example.autolinkmanager.ui.hojalateria.HojalateriaFragment"
        android:label="Hojalatería"
        tools:layout="@layout/fragment_hojalateria" >
        <argument
            android:name="auto_data"
            app:argType="com.example.autolinkmanager.Auto" />
    </fragment>
    <fragment
        android:id="@+id/nav_manage_agencies"
        android:name="com.example.autolinkmanager.ui.admin.ManageAgenciesFragment"
        android:label="Administrar agencias"
        tools:layout="@layout/fragment_manage_agencies" />

    <fragment
        android:id="@+id/nav_pick_agency_location"
        android:name="com.example.autolinkmanager.ui.admin.PickAgencyLocationFragment"
        android:label="Elegir ubicación"
        tools:layout="@layout/fragment_pick_agency_location">

        <argument
            android:name="agencyId"
            app:argType="string"
            android:defaultValue="" />
    </fragment>

    <fragment
        android:id="@+id/nav_car_list"
        android:name="com.example.autolinkmanager.ui.carlist.CarListFragment"
        android:label="Mis Vehículos"
        tools:layout="@layout/fragment_car_list">
        <action
            android:id="@+id/action_nav_car_list_to_nav_car_details"
            app:destination="@id/nav_car_details">
            <argument
                android:name="vehicle_doc_id"
                app:argType="string" />
        </action>
    </fragment>

    <fragment
        android:id="@+id/nav_car_details"
        android:name="com.example.autolinkmanager.ui.cardetails.CarDetailsFragment"
        android:label="Detalles del Vehículo"
        tools:layout="@layout/fragment_car_details">
        <argument
            android:name="vehicle_doc_id"
            app:argType="string" />
    </fragment>

    <fragment
        android:id="@+id/nav_calendar"
        android:name="com.example.autolinkmanager.ui.calendar.CalendarFragment"
        android:label="Calendario de Servicios"
        tools:layout="@layout/fragment_calendar" >
        <action
            android:id="@+id/action_nav_calendar_to_nav_car_details"
            app:destination="@id/nav_car_details" >
            <argument
                android:name="vehicle_doc_id"
                app:argType="string" />
        </action>
        <action
            android:id="@+id/action_nav_calendar_to_nav_add_car"
            app:destination="@id/nav_add_car" />
    </fragment>


</navigation>